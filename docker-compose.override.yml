version: '2'
services:
#start These services can be disabled without affecting any other services
    webapp.dev: #s3mock service is given this name for easy internal excess
        build:
            context: .
            dockerfile: ${DLEMP_BASE_DIR}docker/dockerfile/s3mock
            args:
                DLEMP_BASE_DIR: ${DLEMP_BASE_DIR}
        command: -r /fakes3_root -p 4569 --hostname webapp.dev
        ports:
            - "4569:4569"
    smtp:
        image: michielbdejong/mailtrap
        expose:
            - "25"
#end These services can be disabled without affecting any other services
    phpfpm:
        build:
            dockerfile: ${DLEMP_BASE_DIR}docker/dockerfile/phpfpmdev
        image: dlemp/phpfpm
        extra_hosts:
            - "xdebugremotehost:10.0.75.1"
        volumes:
            - .:/usr/share/nginx/WEBAPP
            - ./${DLEMP_BASE_DIR}docker/docker-config/php.ini-development-delta:/usr/local/etc/php/conf.d/development.ini
    cmd:
        build:
            context: .
            dockerfile: ${DLEMP_BASE_DIR}docker/dockerfile/cmd
        volumes_from:
            - phpfpm
